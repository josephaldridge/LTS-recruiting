services:
  - type: web
    name: lts-recruiting-server
    env: node
    buildCommand: |
      cd /opt/render/project/src/server
      npm install
      npm install typescript @types/node --save-dev
      chmod +x build.sh
      ./build.sh
    startCommand: cd /opt/render/project/src/server; node --max-old-space-size=1024 dist/index.js
    envVars:
      - key: NODE_ENV
        value: production 